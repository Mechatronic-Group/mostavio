---
import { timeline } from "../content/company";
import Headline from "./atoms/Headline.astro";
import AVTransparentBadge from "../assets/v2/AV_TransparentBadge.png";
---

<section>
    <div class="mx-auto px-4 sm:px-12 xl:max-w-6xl xl:px-0">
        <Headline className="text-center uppercase" headline="Mostavio Story" />

        <div class="relative py-32">
            <div
                class="absolute left-8 md:left-1/2 top-0 bottom-0 w-px bg-gray-600 md:transform md:-translate-x-1/2"
            >
            </div>

            <div class="space-y-16">
                {
                    timeline.map((step, i) => (
                        <div class="relative flex items-center">
                            <div class="absolute left-8 md:left-1/2 transform -translate-x-1/2 z-10">
                                <div class="w-12 h-12 rounded-full border-1 border-gray-600 flex items-center justify-center">
                                    <img
                                        class="w-6 h-6 object-contain rounded-full"
                                        src={AVTransparentBadge.src}
                                        alt="Mostavio badge"
                                        loading="lazy"
                                    />
                                </div>
                            </div>

                            <div
                                class={`w-full pl-20 md:w-5/12 md:pl-0 ${i % 2 === 0 ? "md:ml-auto md:pl-8" : "md:mr-auto md:pr-8"}`}
                            >
                                <div
                                    class={`border-1 border-gray-600 rounded-lg p-6 shadow-lg ${i % 2 === 0 ? "md:ml-4" : "md:mr-4"}`}
                                >
                                    <span class="text-gray-400 text-sm font-medium">
                                        {step.year}
                                    </span>
                                    <h3 class="mt-2 text-xl font-semibold text-white">
                                        {step.title}
                                    </h3>
                                    <p class="mt-3 text-gray-300 leading-relaxed">
                                        {step.description}
                                    </p>

                                    {step.image && (
                                        <div class="mt-4">
                                            <img
                                                class="w-full h-48 rounded-lg object-cover"
                                                src={step.image}
                                                alt={step.title}
                                                loading="lazy"
                                                width="1165"
                                                height="864"
                                            />
                                        </div>
                                    )}
                                </div>

                                {Array.isArray(step.highlights) &&
                                    step.highlights.map((highlight, hidx) => (
                                        <div
                                            class={`mt-6 ${i % 2 === 0 ? "md:ml-4" : "md:mr-4"}`}
                                        >
                                            <div class="bg-gray-750 rounded-lg p-4 border-l-4 border-gray-500">
                                                {highlight && (
                                                    <div>
                                                        <p class="text-gray-200 text-sm">
                                                            {highlight.text}{" "}
                                                            <a
                                                                href={
                                                                    highlight
                                                                        .link
                                                                        .href
                                                                }
                                                                target={
                                                                    highlight?.target
                                                                }
                                                                class="text-blue-400 underline hover:text-blue-300 transition-colors"
                                                            >
                                                                {
                                                                    highlight
                                                                        .link
                                                                        .text
                                                                }
                                                            </a>
                                                        </p>
                                                        <div class="mt-3 flex flex-wrap gap-3">
                                                            {highlight.images.map(
                                                                (src, idx) => (
                                                                    <img
                                                                        class={`h-8 w-auto opacity-75 hover:opacity-100 transition-opacity${idx > 2 ? " hidden sm:block" : ""}`}
                                                                        src={
                                                                            src
                                                                        }
                                                                        loading="lazy"
                                                                        alt=""
                                                                    />
                                                                ),
                                                            )}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>
