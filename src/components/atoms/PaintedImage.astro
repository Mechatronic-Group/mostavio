---
import { Image } from "astro:assets";
import Button from "./Button.astro";
import AVPattern from "../../assets/v2/AVPattern.png";

interface PaintedImageProps {
    image: any;
    alt: string;
    imageClass?: string;
    pattern?: boolean;
    containerClass?: string;
    content?: {
        tagline?: string;
        header?: string;
        description?: string;
        link?: string;
    };
    contentClass?: string;
    headerClass?: string;
    heightClass?: string;
}
const {
    image,
    alt = "Mostavio Painted Image",
    imageClass = "",
    containerClass = "",
    content,
    pattern = true,
    contentClass,
    headerClass,
    heightClass = "h-96 md:h-[95vh]",
} = Astro.props as PaintedImageProps;
---

<section
    class={`relative overflow-hidden scroll-mt-24 bg-gradient-painted bg-av-pattern ${containerClass}`}
>
    <slot />

    {
        pattern && (
            <div class="absolute top-0 left-0 w-full z-10 pointer-events-none rotate-180">
                <Image
                    src={AVPattern}
                    alt="Pattern overlay"
                    class="w-full h-32 md:h-20 object-cover opacity-80"
                />
            </div>
        )
    }

    <Image
        class={`w-full ${heightClass} object-cover ${imageClass}`}
        src={image}
        alt={alt}
    />
    <div class="absolute inset-0 max-w-6xl px-6 md:px-12 xl:px-6 mx-auto">
        <slot name="overlay" />
    </div>

    {
        pattern && (
            <div class="absolute bottom-0 left-0 w-full z-10 pointer-events-none transform">
                <Image
                    src={AVPattern}
                    alt="Pattern overlay"
                    class="w-full h-32 md:h-20 object-cover opacity-80"
                />
            </div>
        )
    }

    {
        content && (
            <div
                class={`absolute inset-0 max-w-6xl px-6 md:px-12 xl:px-6 top-1/3 text-center mx-auto ${contentClass}`}
            >
                {content?.tagline && (
                    <p class="uppercase">{content?.tagline}</p>
                )}
                {content?.header && (
                    <h2
                        style="text-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);"
                        class={`my-4 md:my-8 leading-tight text-gray-900 dark:text-white font-bold text-3xl sm:text-4xl md:text-5xl ${headerClass}`}
                    >
                        <Fragment set:html={content?.header} />
                    </h2>
                )}
                {content?.description && (
                    <div
                        class="text-gray-900 dark:text-white py-4 max-w-xl"
                        style="text-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);"
                    >
                        {content?.description}
                    </div>
                )}
                {content?.link && (
                    <Button link={content?.link}>{content?.link}</Button>
                )}
            </div>
        )
    }
</section>
